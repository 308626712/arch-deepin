# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Maintainer: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=dde-api
pkgver=2.91.0
_commit=b7998955c3ba3e676ce6684f930d2eed2649c17d
pkgrel=1
pkgdesc='Go-lang bingdings for dde-daemon'
arch=('i686' 'x86_64')
url="https://github.com/linuxdeepin/dde-api"
license=('GPL3')
depends=('libcanberra-pulse' 'rfkill' 'metacity')
makedepends=('deepin-dbus-factory' 'git' 'go-packages'
			 'gtk3' 'poppler-glib')
groups=('deepin')
# source=("git+https://github.com/linuxdeepin/dde-api.git#commit=$_commit")
source=("dde-api.tar.xz")
sha256sums=('SKIP')

prepare() {
	cd "${pkgname}-${pkgver}"
	sed -i 's\share/gocode\lib/go\' Makefile
}

build() {
	cd "${pkgname}-${pkgver}"
	make GOPATH="/usr/lib/go"
}

package() {
	depends+=('xcur2png')
	cd "${pkgname}-${pkgver}"
	make GOPATH="/usr/lib/go" DESTDIR="${pkgdir}" install
}
