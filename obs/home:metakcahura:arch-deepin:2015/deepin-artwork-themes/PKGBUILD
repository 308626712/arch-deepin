# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Maintainer: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=deepin-artwork-themes
pkgver=15.10.0
_commit=aa39fbca463d24d2ef349ce7563fe959789d4145
pkgrel=2
pkgdesc='Deepin artwork themes'
arch=('any')
license=('CCPL:cc-by-sa')
url="https://github.com/linuxdeepin/deepin-artwork-themes"
groups=('deepin')
depends=('ttf-dejavu')
makedepends=('python2')
# source=("git+https://github.com/linuxdeepin/deepin-artwork-themes.git#commit=$_commit"
#         "https://github.com/linuxdeepin/deepin-desktop-base/raw/master/backgrounds/desktop.jpg")
source=('deepin-artwork-themes.tar.xz'
        'desktop.jpg')
sha256sums=('SKIP' 'SKIP')

prepare() {
  cd deepin-artwork-themes

  # fix theme font name
  sed -i 's/^FontName=.*$/FontName=DejaVu Sans/' themes/Deepin/theme.ini

  # fix default background url
  sed -i 's#^BackgroundFile=.*$#BackgroundFile=file:///usr/share/backgrounds/deepin_default_background.jpg#' themes/Deepin/theme.ini
}

build() {
  cd deepin-artwork-themes

  make build
}

package() {
  depends=('deepin-icon-theme')

  cd deepin-artwork-themes
  make install DESTDIR="${pkgdir}"

  install -d "${pkgdir}"/usr/share/backgrounds/
  cp "${srcdir}"/desktop.jpg "${pkgdir}"/usr/share/backgrounds/deepin_default_background.jpg
}
