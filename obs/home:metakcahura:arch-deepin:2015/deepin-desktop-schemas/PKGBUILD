# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Maintainer: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=deepin-desktop-schemas
pkgver=2.90.0
_commit=9f599e6158bf7f365d103266dd318dafe66ea689
pkgrel=1
pkgdesc='GSettings deepin desktop-wide schemas'
arch=('any')
url="https://github.com/linuxdeepin/deepin-desktop-schemas"
license=('GPL3')
depends=('dconf')
replaces=('deepin-default-gsettings')
install="${pkgname}.install"
# source=("git+https://github.com/linuxdeepin/deepin-desktop-schemas.git#commit=$_commit")
source=("deepin-desktop-schemas.tar.xz")
sha256sums=('SKIP')

prepare() {
  cd deepin-desktop-schemas

  # fix default background url
  sed -i "s#^picture-uri.*#picture-uri='file:///usr/share/personalization/themes/Deepin/wallpapers/default_background.jpg'#" overrides/com.deepin.wrap.gnome.desktop.override
}

build() {
  cd deepin-desktop-schemas

  make
}

package() {
  cd deepin-desktop-schemas

  make DESTDIR="${pkgdir}" install
}
