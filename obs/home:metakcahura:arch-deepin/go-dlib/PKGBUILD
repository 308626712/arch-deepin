# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=go-dlib
pkgver=git20140522~3948504
pkgrel=1
pkgdesc='Go-lang bingdings for dlib'
arch=('i686' 'x86_64')
url="https://gitcafe.com/Deepin/go-lib"
license=('GPL3')
depends=('go>=1.3')
makedepends=('gettext' 'golang-gocheck' 'go-xgb'
	'gtk3' 'gdk-pixbuf2' 'libpulse'  'glib2')
groups=('deepin-dev')
options=(staticlibs)
source=("${pkgname}-${pkgver}.tar.xz")
sha256sums=('SKIP')

_gobuild_dir="${pkgname}-build"
_gopkg="github.com/mattn/go-sqlite3"

# -	mkdir -p ${DESTDIR}${PREFIX}/share/go/src/pkg/${GOPKG_PREFIX}
# +	mkdir -p ${DESTDIR}${PREFIX}/lib/go/src/pkg/${GOPKG_PREFIX}

build(){
  cd "$srcdir"

  mkdir -p "${_gobuild_dir}"/src/"${_gopkg}"
  cp -r go-sqlite3/* "${_gobuild_dir}"/src/"${_gopkg}"/
  GOPATH="${srcdir}/${_gobuild_dir}" go install "${_gopkg}"
}

package() {
  cd "${srcdir}"

  mkdir -p "${pkgdir}"/usr/lib/go/src/pkg/
  mkdir -p "${pkgdir}"/usr/lib/go/pkg/
  cp -r "${_gobuild_dir}"/src/* "${pkgdir}"/usr/lib/go/src/pkg/
  cp -r "${_gobuild_dir}"/pkg/* "${pkgdir}"/usr/lib/go/pkg/
}


# prepare() {
#   cd "${pkgname}-${pkgver}"

#   patch -i "${srcdir}/install-path-fix.patch"
# }

# build() {
#   cd "${pkgname}-${pkgver}"

#   make
# }

# package() {
#   cd "${pkgname}-${pkgver}"

#   make DESTDIR="$pkgdir/" install
# }
