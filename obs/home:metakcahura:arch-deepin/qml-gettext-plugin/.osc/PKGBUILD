# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: 

pkgname=dde-qml-gettext-plugin
_pkgname=qml-gettext-plugin
pkgver=git20140509~f2bde78
pkgrel=1
pkgdesc='dde qml gettext plugin'
arch=('i686' 'x86_64')
url="https://github.com/linuxdeepin/qml-gettext-plugin"
license=('GPL2')
depends=('qt5-declarative')
makedepends=('qt5-tools' 'clang')
groups=('deepin')
source=("${_pkgname}-${pkgver}.tar.xz")
sha256sums=('SKIP')

build(){
  cd "${_pkgname}-${pkgver}"
  
  qmake && make && cd dupdate && qmake && make
}

package() {
  cd "${_pkgname}-${pkgver}"

  cd dupdate && make INSTALL_ROOT="${pkgdir}/" install && cd ..
  
  rm -rf "${pkgdir}"/usr/lib/cmake
  mv "${pkgdir}"/usr/lib/qt/bin/lupdate "${pkgdir}"/usr/lib/qt/bin/deepin-lupdate
  
  make INSTALL_ROOT="${pkgdir}/" install
}
