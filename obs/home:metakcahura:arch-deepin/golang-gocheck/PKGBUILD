# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=golang-gocheck
_pkgver=0.0
_pkgvergit=~bzr20131118+85
pkgver=${_pkgver}${_pkgvergit}
pkgrel=7
pkgdesc='Richer testing framework for Go libraries and applications to use'
arch=('any')
url="http://labix.org/gocheck"
license=('GPL2')
makedepends=('go>=1.3')
options=(staticlibs)
site="http://packages.linuxdeepin.com/deepin/pool/main/g"
source=("${site}/${pkgname}/${pkgname}_${pkgver}.orig.tar.gz"
        "${site}/${pkgname}/${pkgname}_${pkgver}-5.debian.tar.gz")
sha256sums=('71ba0752af3cd04a42a95ef68c098d251430281c8461272df259d52d6092f7da'
	    '05ec3d7199e45d0df85b2708ec05e895e9a62c988dd130adb98a21a355a62e7a')

prepare() {
# apply patches
  cd "$pkgname-$pkgver"

  patchdir=$srcdir/debian/patches
  for f in $(< $patchdir/series); do
    echo "==> patching: ${f##*/}"
    # ignore error if patch again
    patch -Np1 -i $patchdir/$f || echo '==> patch error: ${f##*/}'
  done

}

package() {

  #mkdir -p "${pkgdir}"/usr/share/gocode/lintian/overrides
  mkdir -p "${pkgdir}"/usr/share/gocode/src/launchpad.net/gocheck
  cp -r "$srcdir"/$pkgname-$pkgver/*.go "${pkgdir}"/usr/share/gocode/src/launchpad.net/gocheck
  #cp -r "$srcdir"/debian/golang-gocheck-dev.lintian-overrides "${pkgdir}"/usr/share/lintian/overrides/golang-gocheck-dev
}
