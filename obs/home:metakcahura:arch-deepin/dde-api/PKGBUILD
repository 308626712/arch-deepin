# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Maintainer: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=dde-api
pkgver=2.91.0
pkgrel=2
pkgdesc='Go-lang bingdings for dde-daemon'
arch=('i686' 'x86_64')
url="https://gitcafe.com/Deepin/dde-api"
license=('GPL3')
depends=('glibc' 'libcanberra-pulse' 'libxi' 'rfkill')
makedepends=('git' 'go-packages' 'gtk3' 'metacity-ubuntu<3.0' 'poppler-glib')
groups=('deepin')
#source=("git+https://github.com/linuxdeepin/dde-api.git#tag=$pkgver")
source=('dde-api.tar.xz')
sha256sums=('SKIP')

prepare() {
	sed -i 's\share/gocode\lib/go\' dde-api/Makefile
}

build() {
	cd dde-api
	make GOPATH="/usr/lib/go"
}

package() {
	cd dde-api
	make GOPATH="/usr/lib/go" DESTDIR="${pkgdir}" install
}
