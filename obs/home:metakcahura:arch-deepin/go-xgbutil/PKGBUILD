# Maintainer: Josip Ponjavic <josipponjavic at gmail dot com>
# Contributor: Xu Fasheng <fasheng.xu[AT]gmail.com>

pkgname=go-xgbutil
pkgver=git20140311~800bc6c
pkgrel=3
pkgdesc='xgbutil is a utility library designed to work with the X Go Binding.'
arch=('i686' 'x86_64')
url="https://github.com/BurntSushi/xgbutil"
license=('GPL2')
depends=('go>=1.3' 'go-xgb' 'go-graphics-go' 'go-jamslam-freetype-go')
options=(staticlibs)
source=("${pkgname}-${pkgver}.tar.xz")
sha256sums=('SKIP')

_gobuild_dir="${pkgname}-build"
_gopkg="github.com/BurntSushi/xgbutil"

prepare() {
  mkdir -p "${_gobuild_dir}"/src/"${_gopkg}"
  cp -r "${pkgname}-${pkgver}"/* "${_gobuild_dir}"/src/"${_gopkg}"/
}

# TODO: depends on other go library, do not try to build or will appear permission denied issue
# build() {
  # GOPATH="${srcdir}/${_gobuild_dir}" go install "${_gopkg}"
  # GOPATH="${srcdir}/${_gobuild_dir}" go install "${_gopkg}"/{ewmh,gopher,icccm,keybind,motif,mousebind,xcursor,xevent,xgraphics,xinerama,xprop,xrect,xwindow}
# }

package() {
  mkdir -p "${pkgdir}"/usr/lib/go/src/pkg/
  cp -r "${_gobuild_dir}"/src/* "${pkgdir}"/usr/lib/go/src/pkg/
}
